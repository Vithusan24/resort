"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1673,3315],{51673:function(a,b,c){var d=c(47568),e=c(26042),f=c(69396),g=c(99534),h=c(34051),i=c.n(h),j=c(67294),k=c(56064),l="Something went wrong!",m="sms_email",n=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=function(){F(!1)},h=a.isBestDeal,n=(0,g.Z)(a,["isBestDeal"]),o=(0,j.useState)(null),p=o[0],q=o[1],r=(0,j.useState)(!1),s=r[0],t=r[1],u=(0,j.useState)(null),v=u[0],w=u[1],x=(0,j.useState)(null),y=x[0],z=x[1],A=(0,j.useState)({isOpen:!1,parameters:null}),B=A[0],C=A[1],D=(0,j.useState)(null),E=D[0],F=D[1],G=(0,j.useState)({error:!1,message:l,isShow:!1}),H=G[0],I=G[1],J=(0,k.v9)(function(a){var b,c;return null==a?void 0:null===(b=a.user)|| void 0===b?void 0:null===(c=b.data)|| void 0===c?void 0:c.data}),K=function(){},L=function(){C(function(a){return{isOpen:!1,parameters:null}})};if(void 0===h?0:h){var M,N,O=c(12012).T,P=(null==J?void 0:J.full_name)||"",Q=(null==J?void 0:J.mobile)||"",R=(null==J?void 0:J.sdid)||"",S=Boolean(R&&Q)?1:0,T=!1;K=(0,j.useCallback)((N=(0,d.Z)(i().mark(function a(b){var c,d,h,j,k,o,p,r,s,u,v,x,y,A,D,E,G,H,J,K,L,M,N,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=void 0===(c=b.toastRef)?null:c,h=b.ver_code,j=void 0===h?"":h,k=b.casetype,o=void 0===k?m:k,p=b.resendOtp,r=void 0!==p&&p,s=b.calledFrom,u=void 0===s?"":s,v=b.mobile,x=void 0===v?"":v,y=b.name,A=void 0===y?"":y,D=b.callbackfunc,E=void 0===D?null:D,G=b.leadtype,H=void 0===G?"bestdeal":G,J=b.pagename,K=void 0===J?"":J,L=b.position,M=void 0===L?"":L,N=b.calltype,U=void 0===N?"":N,V=b.loginUserInfo,W=void 0===V?null:V,X=b.cdata,Y=void 0===X?null:X,Z=b.cli,$=void 0===Z?null:Z,_=(0,g.Z)(b,["toastRef","ver_code","casetype","resendOtp","calledFrom","mobile","name","callbackfunc","leadtype","pagename","position","calltype","loginUserInfo","cdata","cli"]),ab={leadtype:H,pagename:K,position:M,calltype:U},W&&(null===(aa=Object.keys(W))|| void 0===aa?void 0:aa.length)>0&&(P=(null==W?void 0:W.full_name)||"",Q=(null==W?void 0:W.mobile)||"",R=(null==W?void 0:W.sdid)||"",S=Boolean(R&&Q)?1:0),ab.leadtype||(Q&&R?ab.leadtype="".concat(H,"_submit"):ab.leadtype="".concat(H,"_click")),(null==ab?void 0:ab.position)||(ab.position="".concat((null==_?void 0:_.page)||""),ab.pagename="".concat((null==_?void 0:_.page)||"")),P=A||P,Q=x||Q,ac=null,ad="",z(u),!r){a.next=25;break}return ag={},(ag=(null==B?void 0:B.parameters)?null==B?void 0:B.parameters:_).ver_code="",ag.casetype=m,P=null==B?void 0:null===(ae=B.parameters)|| void 0===ae?void 0:ae.name,Q=null==B?void 0:null===(af=B.parameters)|| void 0===af?void 0:af.mobile,a.next=21,O((0,e.Z)((0,f.Z)((0,e.Z)({},ag),{calledFrom:u,mobile:Q,name:P,is_verified:S,resendOtp:!0,search_id:n.search_id,contracts:n.contracts,trdData:n.trdData}),ab));case 21:ac=a.sent,ad={error:!1,isShow:!0,message:"OTP Resent Successfully"},a.next=42;break;case 25:if(S){a.next=38;break}return aj={},aj=(null==B?void 0:B.parameters)?null==B?void 0:B.parameters:_,j?(aj.ver_code=j,aj.casetype=o,P=null==B?void 0:null===(ak=B.parameters)|| void 0===ak?void 0:ak.name,Q=null==B?void 0:null===(al=B.parameters)|| void 0===al?void 0:al.mobile,ad={error:!1,isShow:!0,message:"OTP Verifying..."}):ad={error:!1,isShow:!0,message:"OTP Sent to ".concat(Q," Successfully")},(null==B?void 0:B.isOpen)&&t(!0),a.next=33,O((0,f.Z)((0,e.Z)((0,f.Z)((0,e.Z)({},aj),{calledFrom:u,mobile:Q,name:P,is_verified:S,search_id:n.search_id,contracts:n.contracts,trdData:n.trdData,cli:(null==aj?void 0:aj.cli)||$,cdata:(null==aj?void 0:aj.cdata)||Y}),ab),{vid:n.vid}));case 33:ac=a.sent,(null==B?void 0:B.isOpen)||(null==ac?void 0:null===(ah=ac.data)|| void 0===ah?void 0:ah.statuscode)!=6||(T=!0,C(function(a){return(0,f.Z)((0,e.Z)({},a),{isOpen:!0,parameters:(0,e.Z)((0,f.Z)((0,e.Z)({},_),{calledFrom:u,mobile:Q,name:P,is_verified:S,cdata:Y,cli:$}),ab)})})),(null==ac?void 0:null===(ai=ac.data)|| void 0===ai?void 0:ai.statuscode)!=1&&(ad=""),a.next=42;break;case 38:return t(!0),a.next=41,O((0,f.Z)((0,e.Z)((0,f.Z)((0,e.Z)({},_),{calledFrom:u,mobile:Q,name:P,is_verified:S,search_id:n.search_id,contracts:n.contracts,trdData:n.trdData}),ab),{cli:$,cdata:Y,vid:n.vid}));case 41:ac=a.sent;case 42:if(t(!1),q(ac),(null==ac?void 0:ac.error)!= !0){a.next=52;break}if(!0!=T){a.next=49;break}return a.abrupt("return",!0);case 49:"undefined"!=typeof document&&document.querySelector("body").classList.remove("no_scroll"),E&&E(),w(!0),ao=ad||{error:!0,isShow:!0,message:(null==ac?void 0:null===(am=ac.data)|| void 0===am?void 0:am.message)||l},(ap=(null==B?void 0:B.parameters)?null==B?void 0:null===(an=B.parameters)|| void 0===an?void 0:an.toastRef:d)?null==d||null===(aq=d.current)|| void 0===aq||aq.show(null==ao?void 0:ao.message,null,null,{showSuccessIcon:!(null==ao?void 0:ao.error)}):alert(null==ao?void 0:ao.message),I(function(a){return ao});case 50:a.next=53;break;case 52:as=(null==B?void 0:null===(ar=B.parameters)|| void 0===ar?void 0:ar.frmpg)||"",(null==B?void 0:B.isOpen)&&C(function(a){return(0,f.Z)((0,e.Z)({},a),{isOpen:!1})}),F(!0),setTimeout(function(){F(!1),E&&E(),"undefined"!=typeof document&&document.querySelector("body").classList.remove("no_scroll"),1!=S&&"lspg_bdinline"==as&&window.location.reload()},2500);case 53:case"end":return a.stop()}},a)})),function(a){return N.apply(this,arguments)}),[B,J])}var U={bdSubmitHookData:p,bdSubmitHookLoading:s,bdSubmitHookError:v,bdSubmitHookReference:y,bdSubmitHookAskVerifyPopup:B,bdSubmitHookOnSubmit:K,bdSubmitHookbdSuccessErrorPopup:E,bdSubmitHookbdToast:H,bdSubmitHookOnCloseVerifyPop:L,closeSuccesPop:b};return(0,e.Z)({},U)};b.Z=n},73315:function(a,b,c){c.d(b,{a:function(){return d}});var d=function(){return"3.0"}},12012:function(a,b,c){c.d(b,{T:function(){return o}});var d,e=c(47568),f=c(26042),g=c(69396),h=c(82222),i=c(34051),j=c.n(i),k=c(9669),l=c.n(k),m=c(90091),n=c(73315),o=(d=(0,e.Z)(j().mark(function a(b){var d,e,i,k,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=void 0===(d=b.magicname)?"":d,i=b.barea,k=void 0===i?"":i,o=b.bcity,p=void 0===o?"":o,q=b.city,r=b.ncatid,s=b.area,t=b.catname,u=b.lat,v=b.long,w=b.docid,x=b.name,y=b.mobile,z=b.email,A=b.bd,B=void 0===A?"1":A,C=b.nearme,D=b.paidstatus,E=b.ver_code,F=void 0===E?"":E,G=b.casetype,H=void 0===G?"sms_email":G,I=b.resendOtp,J=void 0!==I&&I,K=b.from,L=void 0===K?"":K,M=b.page,N=void 0===M?"":M,O=b.calledFrom,P=void 0===O?"":O,Q=b.frmpg,R=void 0===Q?"":Q,S=b.bd_text,T=void 0===S?"":S,U=b.bname,V=void 0===U?"":U,W=b.li,X=void 0===W?"":W,Y=b.is_verified,Z=void 0===Y?"":Y,$=b.pageName,_=void 0===$?"":$,aa=b.position,ab=void 0===aa?"":aa,ac=b.verified,ad=void 0===ac?"":ac,ae=b.pincode,af=void 0===ae?"":ae,ag=b.pos,ah=void 0===ag?"":ag,ai=b.leadtype,aj=void 0===ai?"bestdeal":ai,ak=b.pagename,al=void 0===ak?"":ak,am=b.calltype,an=void 0===am?"":am,ao=b.search_id,ap=b.contracts,aq=void 0===ap?[]:ap,ar=b.trdData,as=void 0===ar?{}:ar,at=b.cli,au=b.cdata,av=b.vid,aw=void 0===av?"2":av,ax={city:q,ncatid:r,area:s,catname:t,lat:u,long:v,docid:w,name:x,mobile:y,email:z,is_verified:Z,nearme:C,paidstatus:D,barea:k,bcity:p,magicname:e,from:L,page:N,calledFrom:P,frmpg:R,leadtype:aj,pagename:al,position:ab,calltype:an},R=ax.frmpg?null==ax?void 0:ax.frmpg:_,(null==y?void 0:y.length)>0&&(ax=(0,g.Z)((0,f.Z)({},ax),{mobile:y})),(null==x?void 0:x.length)>0&&(ax=(0,g.Z)((0,f.Z)({},ax),{name:x})),ay={data:{},error:!1},a.prev=6,aA=(0,f.Z)({},ax),(void 0!==(null==aA?void 0:aA.callbackFunc)||null!=(0,h.Z)(null==aA?void 0:aA.callbackFunc))&&delete aA.callbackFunc,(void 0!==(null==aA?void 0:aA.calledFrom)||null!=(0,h.Z)(null==aA?void 0:aA.calledFrom))&&delete aA.calledFrom,(void 0!==(null==aA?void 0:aA.showLoader)||null!=(0,h.Z)(null==aA?void 0:aA.showLoader))&&delete aA.showLoader,(void 0!==(null==aA?void 0:aA.onClose)||null!=(0,h.Z)(null==aA?void 0:aA.onClose))&&delete aA.onClose,aB=_,"bd6_click"==aA.leadtype&&(aA.leadtype="bd_submit");try{F&&(aC="home"==aB?"hmpge":"details"===aB||"details_sticky"===aB?"dtlpg":aB,aD={li:X,ll:aC,navigation:"0",lpageval:"home"==aB?"hmpge":aB||"",category_name:(null==aA?void 0:aA.catname)?decodeURIComponent(null==aA?void 0:aA.catname):"",contracts:aq,search_id:ao,trd:[as],ncatid:(null==aA?void 0:aA.ncatid)||"",area:(null==aA?void 0:aA.area)||"",pincode:af||"",position_no:"",leadtype:"bd_submit",pagename:"details"==_||"details_sticky"==_?"dtlpg":al,position:ab||ah,dcity:(null==aA?void 0:aA.city)||"",calltype:"",vid:aw},au&&at&&(aD.li="click",Array.isArray(as)?aD.trd=[(0,g.Z)((0,f.Z)({},as[0]),{li:"bd_strip_verification"})]:as&&(null===(aE=Object.keys(as))|| void 0===aE?void 0:aE.length)>0&&(aD.trd=[(0,g.Z)((0,f.Z)({},as),{li:"bd_strip_verification"})])),(0,m.jdTracker)(aD))}catch(j){console.log(j)}return a.next=18,l().post("/api/submitBestDetal",(0,g.Z)((0,f.Z)({},aA),{ver_code:F,vid:aw,casetype:H,bd:B,frmpg:R,resendOtp:J,version:(0,n.a)()}),{headers:{"Content-Type":"application/json"}});case 18:return aF=a.sent,a.next=21,aF.data;case 21:return aG=a.sent,clearTimeout(window.bestDealAutoPopupTimeOut),(null==aG?void 0:null===(az=aG.results)|| void 0===az?void 0:az.statuscode)==1?(aI={li:X,ll:aH="home"==aB?"hmpge":"details"===aB||"details_sticky"===aB?"dtlpg":aB,navigation:"0",lpageval:"home"==aB?"hmpge":aB||"",category_name:(null==aA?void 0:aA.catname)?decodeURIComponent(null==aA?void 0:aA.catname):"",contracts:aq,search_id:ao,trd:[as],ncatid:(null==aA?void 0:aA.ncatid)||"",area:(null==aA?void 0:aA.area)||"",pincode:af||"",position_no:"",leadtype:"bd_submit",pagename:"details"==_||"details_sticky"==_?"dtlpg":al,position:ab||ah,dcity:(null==aA?void 0:aA.city)||"",calltype:"",vid:aw},au&&at&&(aI.li="click",Array.isArray(as)?aI.trd=[(0,g.Z)((0,f.Z)({},as[0]),{li:at})]:as&&(null===(aJ=Object.keys(as))|| void 0===aJ?void 0:aJ.length)>0&&(aI.trd=[(0,g.Z)((0,f.Z)({},as),{li:at})])),(0,m.jdTracker)(aI),aK=(null==(aK=sessionStorage.getItem("bdsubmitted"))?void 0:aK.length)>0?aK.concat(",".concat(r)):r,"dtlpg"==_&&(aK=(null==aK?void 0:aK.length)>0?aK.concat(",".concat(null==ax?void 0:ax.docid)):null==ax?void 0:ax.docid),sessionStorage.setItem("bdsubmitted",aK),aL=c(85313).j,"dtlpg"==aB||"rsltpge"==aB&&(aL({bdtext:T,bdpage:aB,ncatid:r,bname:V,verified:ad,paidStatus:D,docid:w,position:ab,type:"Submit"}),void 0!==window.dataLayer&&"function"==typeof(null==dataLayer?void 0:dataLayer.push)&&dataLayer.push({event:"form_interaction",page_type:"rsltpge",form_name:"Best Deal final",form_step_name:"",form_step_number:(null==ax?void 0:ax.from)&&"popup"==ax.from?"2":"",form_option:(null==ax?void 0:ax.catname)?decodeURIComponent(null==ax?void 0:ax.catname):"",time_stamp:Date.now()})),ay.data=null==aG?void 0:aG.results,ay.error=!1):(ay.data=null==aG?void 0:aG.results,ay.error=!0),a.abrupt("return",ay);case 27:return a.prev=27,a.t0=a.catch(6),console.log("api fetching error",a.t0),a.abrupt("return",ay);case 31:case"end":return a.stop()}},a,null,[[6,27]])})),function(a){return d.apply(this,arguments)})}}])